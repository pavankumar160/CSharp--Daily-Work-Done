using System;
using System.Collections.Generic;

namespace LibrarySystemDemo
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("===== Library System =====\n");

            var availableBooks = new List<string> { "1984", "The Hobbit", "Moby Dick", "Hamlet" };
            var students = new Dictionary<int, string>
            {
                {1, "Alice"},
                {2, "Bob"},
                {3, "Charlie"}
            };
            var borrowQueue = new Queue<string>();
            var borrowHistory = new Stack<string>();

            Console.WriteLine("Books Available:");
            DisplayList(availableBooks);

            availableBooks.Add("Pride and Prejudice");
            Console.WriteLine("\nAfter adding a new book:");
            DisplayList(availableBooks);

            Console.WriteLine("\nStudents:");
            foreach (var student in students)
                Console.WriteLine($"ID {student.Key}: {student.Value}");

            borrowQueue.Enqueue("Alice");
            borrowQueue.Enqueue("Bob");
            borrowQueue.Enqueue("Charlie");

            Console.WriteLine("\nBorrow Queue:");
            foreach (var name in borrowQueue)
                Console.WriteLine(name);

            Console.WriteLine("\nProcessing Borrow Requests:");
            while (borrowQueue.Count > 0)
            {
                var borrower = borrowQueue.Dequeue();
                Console.WriteLine($"{borrower} borrowed a book.");
                borrowHistory.Push($"{borrower} borrowed a book");
            }

            Console.WriteLine("\nBorrow History:");
            foreach (var record in borrowHistory)
                Console.WriteLine(record);

            Console.WriteLine("\nUndo Last Borrow:");
            Console.WriteLine(borrowHistory.Pop());

            Console.WriteLine("\nRemaining History:");
            foreach (var record in borrowHistory)
                Console.WriteLine(record);

            Console.WriteLine("\n===== End =====");
        }

        static void DisplayList(List<string> items)
        {
            foreach (var item in items)
                Console.WriteLine(item);
        }
    }
}
